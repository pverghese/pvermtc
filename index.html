<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">

<head>
  <title>Geolocation API</title>
</head>
<style>
  h1 {
    color: black;
    font-family: verdana;
    font-size: 100%;
  }

  .main {
    display: flex;
  }

  label {
    display: flex;
    justify-content: center;
    align-content: center;
    flex-wrap: wrap;
    margin-right: 2px;
  }

  p {
    color: rgb(0, 0, 0);
    font-family: courier;
    font-size: 80%;
    margin: 5px;
    background-color: rgb(247, 246, 253);
    padding: 5px 5px;
    border-radius: 5px;
    user-select: none;
  }

  .pstops {
    color: rgb(255, 255, 255);
    background-color: rgb(38, 40, 107);
    font-family: courier;
    font-size: 80%;
    user-select: none;
    display: flex;
    padding: 5px 5px;

  }

  .pstops:active {
    background-color: cadetblue;
  }

  .pstop {
    color: rgb(0, 0, 0);
    background-color: rgb(247, 246, 253);
    font-family: courier;
    font-size: 80%;
    user-select: none;
    display: flex;
    padding: 5px 5px;
    border-radius: 5px;

  }

  .pstop:active {
    background-color: cadetblue;
  }

  .stops {
    background-color: rgb(230, 231, 249);
    color: black;
    border-bottom: 1px solid black;
    margin: 5px;
    padding: 2px;
    font-weight: bold;
    border-radius: 5px;
    filter: drop-shadow(2px 2px 4px rgb(102, 112, 112))
  }

  .stop {
    background-color: rgb(220, 227, 231);
    color: black;
    border-bottom: 1px solid black;
    margin: 5px;
    padding: 2px;
    font-weight: bold;
    border-radius: 5px;
    filter: drop-shadow(2px 2px 4px rgb(102, 112, 112))
  }

  button {
    background-color: #0423aa;
    /* Green */
    border: none;
    color: white;
    padding: 10px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
  }

  input[type=text] {
    display: inline-block;
    height: auto;
    border: 1px solid black;
    margin-right: 10px;
    width: 35%;
  }

  .bolded {
    font-weight: bolder;
    font-size: larger;
    color: #0e40d3;
  }
</style>

<body>
  <h1>Get Stops at current location or search for stops</h1>
  <div class="main">
    <label for="fname">Search</label>
    <input type="text" id="fname" name="fname">
    <button onclick="getlocation()">Get Location</button>

  </div>
  <div id="location"></div>
  <div id="stops" class="stops"></div>
  <div id="stop" class="stop"></div>
  <div id="bus" class="bus"></div>
  <script>
    function getlocation() {
      val = document.getElementById("fname").value
      if (val) {
        console.log(val)
        document.getElementById("fname").value = ''
        data = search(val).then((y) => {
          if (y.length > 0) {
            console.log("Got results: " + y.length)
            console.log(y[0])
            getBusStops({ coords: { latitude: parseFloat(y[0]["lat"]), longitude: parseFloat(y[0]["lon"]) } })
          }
        })

      } else {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(getBusStops)
        }
        else {
          alert("Sorry! your browser is not supporting")
        }

      }
    }

    function getBusStops(position) {
      var x = "Your current location is (" + "Latitude: " + position.coords.latitude + ", " + "Longitude: " + position.coords.longitude + ")";
      document.getElementById("location").innerHTML = x;
      //console.log(x)
      //console.log(data);
      const timestamp = new Date(Date.now())
      //console.log(`Getting bus stations nearby at: ${timestamp.toLocaleDateString()} ||| ${timestamp.toTimeString()}`)
      document.getElementById("stops").innerHTML = "Loading...";
      data = getData(position).then((y) => {
        if (Object.keys(y).length === 0) {
          document.getElementById("stops").innerHTML = "Server is down";
          return
        }
        var stops = '';
        //console.log(y);
        y["data"].map(((d) => {
          stops += `<p class="pstops" onclick='getBusAtStation(${d["geofenceid"]})'>${d["geofencename"]} -> ${d["towards"]} ---- distance:${d["distance"]} ---${d["geofenceid"]}</p>`
        }));
        //console.log(stops)
        document.getElementById("stops").innerHTML = stops;
      }
      )
    }

    function getBusAtStation(st) {
      const timestamp = new Date(Date.now())
      console.log(`Getting live buses at station at: ${timestamp.toLocaleDateString()} ||| ${timestamp.toTimeString()}`)
      //document.getElementById("stop").innerHTML = "getting data..."
      console.log(st)
      data = getStopData(st).then((y) => {
        if (Object.keys(y).length === 0) {
          document.getElementById("stop").innerHTML = "Server is down";
          return
        }
        d = y["data"]
        console.log(d)
        buses = `Live Buses at station: ${st}`
        if (d.length == 0) {
          document.getElementById("stop").innerHTML = buses + `<p>No buses found</p>`
        } else {
          d.map((j) => {
            if (j["routeno"].includes("KIA") || j["routeno"][0] == "V") {
              buses += `<p class="pstop" onclick='getBusData(${j["vehicleid"]})'><span class="bolded">${j["routeno"]} - ${j["busno"]} -- ${j["arrivaltime"].split(' ')[1]} -- to: ${j["tostationname"]}</span></p>`
            }
            buses += `<p class="pstop" onclick='getBusData(${j["vehicleid"]})'>${j["routeno"]} - ${j["busno"]} -- ${j["arrivaltime"].split(' ')[1]} -- to: ${j["tostationname"]}</p>`
          })
          document.getElementById("stop").innerHTML = buses

        }
      })

    }

    function getBusData(vehicleid) {
      const timestamp = new Date(Date.now())
      console.log(`Getting live bus data for ${vehicleid} at: ${timestamp.toLocaleDateString()} ||| ${timestamp.toTimeString()}`)
      //document.getElementById("stop").innerHTML = "getting data..."
      data = getVehicleTripDetails(vehicleid).then((y) => {
        if (Object.keys(y).length === 0) {
          document.getElementById("bus").innerHTML = "Server not respoding with bus data";
          return
        }
        //console.log(y)
        d = y["RouteDetails"]
        bus = `<p><span class="bolded">Live Bus route for busno: ${y["RouteDetails"][0]["busno"]}</span></p>`
        // bus += `<p>Last refreshed: ${y["LiveLocation"][0]["lastrefreshon"]}</p>`
        // bus += `<p>Location: ${y["LiveLocation"][0]["location"]}</p>`
        // bus += `<p>PrevStop: ${y["LiveLocation"][0]["previousstop"]}</p>`
        // bus += `<p>NextStop: ${y["LiveLocation"][0]["nextstop"]}</p>`
        if (d.length == 0) {
          document.getElementById("stop").innerHTML = bus + `<p>No data received</p>`
        } else {
          d.map((j) => {
            if (j["stationname"] == j["laststop"].split('(')[0].trim()) {
              console.log("Staion name is the same")
              bus += `<p><span class="bolded">${j["stationname"]} - ${j["etastatus"]}  <---  Current Stop</span></p>`
            } else {
              bus += `<p>${j["stationname"]} - ${j["etastatus"]}</p>`

            }
          })
          document.getElementById("bus").innerHTML = bus

        }
        //document.getElementById("bus").innerHTML = bus
      })


    }


    async function search(searchStr) {
      const res = await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(searchStr + " bangalore")}&format=json&limit=5`)
      let body = await res.json()
      console.log(body)
      return body
    }
    async function getStopData(stop) {
      let obj;
      //const testData ='{"data":[{"routeno":"267","routename":"HSG-SBS","fromstationname":"Hesaraghatta","tostationname":"Shivajinagara Bus Station","vehicleid":22765,"busno":"KA57F2661","arrivaltime":"21-02-2024 08:29:00","devicestatusflag":1,"devicestatusnameflag":"Tracking available"},{"routeno":"K-2","routename":"HBL-MRBS","fromstationname":"Hebbala","tostationname":"Mysore Road Bus Station","vehicleid":21033,"busno":"KA57F0407","arrivaltime":"21-02-2024 08:36:00","devicestatusflag":1,"devicestatusnameflag":"Tracking available"},{"routeno":"K-2A","routename":"KVB-MRBS","fromstationname":"Kaval Byrasandra","tostationname":"Mysore Road Bus Station","vehicleid":19583,"busno":"KA57F2172","arrivaltime":"21-02-2024 08:40:00","devicestatusflag":1,"devicestatusnameflag":"Tracking available"},{"routeno":"276","routename":"VRP-KBS","fromstationname":"Vidyaranyapura Bus Station","tostationname":"Kempegowda Bus Station","vehicleid":26299,"busno":"KA51AH4537","arrivaltime":"21-02-2024 08:42:00","devicestatusflag":1,"devicestatusnameflag":"Tracking available"},{"routeno":"K-2","routename":"HBL-MRBS","fromstationname":"Hebbala","tostationname":"Mysore Road Bus Station","vehicleid":21256,"busno":"KA57F1899","arrivaltime":"21-02-2024 08:42:00","devicestatusflag":1,"devicestatusnameflag":"Tracking available"},{"routeno":"276-AB","routename":"DBH-SBS","fromstationname":"Dodda Bettahalli","tostationname":"Shivajinagara Bus Station","vehicleid":22811,"busno":"KA57F3340","arrivaltime":"21-02-2024 08:50:00","devicestatusflag":1,"devicestatusnameflag":"Tracking available"},{"routeno":"276","routename":"VRP-KBS","fromstationname":"Vidyaranyapura Bus Station","tostationname":"Kempegowda Bus Station","vehicleid":26403,"busno":"KA51AH8347","arrivaltime":"21-02-2024 08:51:00","devicestatusflag":1,"devicestatusnameflag":"Tracking available"},{"routeno":"276 D45-VRP-KBS","routename":"D45-KBS","fromstationname":"Depot-45 Gate","tostationname":"Kempegowda Bus Station","vehicleid":22870,"busno":"KA57F3641","arrivaltime":"21-02-2024 08:52:00","devicestatusflag":1,"devicestatusnameflag":"Tracking available"},{"routeno":"500-B","routename":"CSB-YPR","fromstationname":"Central Silk Board","tostationname":"Yeshawanthapura Bus Station","vehicleid":18496,"busno":"KA57F4398","arrivaltime":"21-02-2024 10:01:00","devicestatusflag":1,"devicestatusnameflag":"Tracking available"}],"Message":"Success","Issuccess":true,"exception":null,"RowCount":9,"responsecode":200}'
      const testData = ''
      if (testData) {
        return new Promise((resolve) => resolve(JSON.parse(testData)))
      }
      const res = await fetch("https://bmtcmobileapistaging.amnex.com/WebAPI/GetMobileTripsData", {
        method: "POST",
        body: JSON.stringify({
          stationId: stop,
          triptype: 1
        }),
        headers: {
          "Content-type": "application/json; charset=UTF-8",
          "lan": "en",
          "deviceType": "android",
          "deviceId": "0298cd37e29548dc",
          "authToken": "N/A"
        }
      });
      obj = await res.json()
      return obj

    }
    async function getData(position) {

      //testData = '{"data":[{"rowno":1,"geofenceid":22937,"geofencename":"80ft Road MS Ramaiah College","center_lat":13.02752,"center_lon":77.57571,"towards":"MS Ramaiah Hospital","distance":0.28,"totalminute":3,"responsecode":200,"radiuskm":1},{"rowno":2,"geofenceid":20610,"geofencename":"Ashwathnagara","center_lat":13.02679,"center_lon":77.57984,"towards":"Gangenahalli","distance":0.32,"totalminute":4,"responsecode":200,"radiuskm":1},{"rowno":3,"geofenceid":23198,"geofencename":"Ashwathnagara","center_lat":13.02691,"center_lon":77.57973,"towards":"Ramaiah Hospital","distance":0.32,"totalminute":4,"responsecode":200,"radiuskm":1},{"rowno":4,"geofenceid":20786,"geofencename":"Geddalahalli","center_lat":13.03077,"center_lon":77.57751,"towards":"Nagashettyhalli","distance":0.59,"totalminute":7,"responsecode":200,"radiuskm":1},{"rowno":5,"geofenceid":25367,"geofencename":"Geddalahalli","center_lat":13.03082,"center_lon":77.57751,"towards":"Hebbala","distance":0.6,"totalminute":7,"responsecode":200,"radiuskm":1},{"rowno":6,"geofenceid":20731,"geofencename":"CPRI Quarters","center_lat":13.02241,"center_lon":77.5722,"towards":"Ramaiah Hospital","distance":0.64,"totalminute":8,"responsecode":200,"radiuskm":1},{"rowno":7,"geofenceid":20730,"geofencename":"CPRI Quarters","center_lat":13.02217,"center_lon":77.57224,"towards":"Sadashiva Nagara Police Station","distance":0.65,"totalminute":8,"responsecode":200,"radiuskm":1},{"rowno":8,"geofenceid":21029,"geofencename":"MS Ramaiah Hospital","center_lat":13.02771,"center_lon":77.57162,"towards":"Sadashiva Nagara Police Station","distance":0.66,"totalminute":8,"responsecode":200,"radiuskm":1},{"rowno":9,"geofenceid":29054,"geofencename":"MS Ramayya Hospital","center_lat":13.02835,"center_lon":77.57158,"towards":"C P R I","distance":0.69,"totalminute":8,"responsecode":200,"radiuskm":1},{"rowno":10,"geofenceid":33958,"geofencename":"MS Ramayya Hospital","center_lat":13.02847,"center_lon":77.57141,"towards":"Ashwath Nagara","distance":0.71,"totalminute":9,"responsecode":200,"radiuskm":1}],"Message":"Success","Issuccess":true,"exception":null,"RowCount":10,"responsecode":200}'
      const testData = ''
      let obj;
      if (testData) {
        return new Promise((resolve) => resolve(JSON.parse(testData)))
      }

      try {
        const res = await fetch("https://bmtcmobileapistaging.amnex.com/WebAPI/NearbyStations_v2", {
          method: "POST",
          body: JSON.stringify({
            latitude: position.coords.latitude,
            longitude: position.coords.longitude,
            stationId: 0,
            stationFlag: 1
          }),
          headers: {
            "Content-type": "application/json; charset=UTF-8",
            "lan": "en",
            "deviceType": "android",
            "deviceId": "0398cd37e29548dc",
            "authToken": "N/A"
          }
        });
        obj = await res.json()
        return obj
      } catch (error) {
        console.log("There was an error", error)
        return {}
      }

    }
    async function getVehicleTripDetails(vehicleid) {
      //const testData='{"RouteDetails":[{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Hesaraghatta","stationid":35751,"actual_arrivaltime":"12:37","etastatus":"12:37","etastatusmapview":"12:37","latitude":13.13784,"longitude":77.47944,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:40","sch_departuretime":"12:40","eta":"","actual_arrivaltime1":"12:37","actual_departudetime":"12:38","tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283158,"tripposition":1,"stopstatus":0,"stopstatus_distance":999.0,"lastetaupdated":null,"minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Hesaraghatta TB Cross","stationid":25869,"actual_arrivaltime":"12:40","etastatus":"12:40","etastatusmapview":"12:40","latitude":13.13056,"longitude":77.48438,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:42","sch_departuretime":"12:42","eta":"","actual_arrivaltime1":"12:40","actual_departudetime":"12:41","tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283159,"tripposition":1,"stopstatus":0,"stopstatus_distance":999.0,"lastetaupdated":"2024-02-21T12:41:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Indian Institute of Horticultural Research","stationid":33033,"actual_arrivaltime":"12:44","etastatus":"12:44","etastatusmapview":"12:44","latitude":13.13544,"longitude":77.49095,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:44","sch_departuretime":"12:44","eta":"","actual_arrivaltime1":"12:44","actual_departudetime":"12:44","tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283160,"tripposition":1,"stopstatus":0,"stopstatus_distance":999.0,"lastetaupdated":"2024-02-21T12:44:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Ivarukandapura","stationid":26212,"actual_arrivaltime":"12:45","etastatus":"12:45","etastatusmapview":"12:45","latitude":13.13767,"longitude":77.49442,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:45","sch_departuretime":"12:45","eta":"12:46","actual_arrivaltime1":"12:45","actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283161,"tripposition":2,"stopstatus":0,"stopstatus_distance":999.0,"lastetaupdated":"2024-02-21T12:46:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Muthkur Cross Shivakote","stationid":31396,"actual_arrivaltime":null,"etastatus":"12:48","etastatusmapview":"12:48","latitude":13.14298,"longitude":77.50233,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:46","sch_departuretime":"12:46","eta":"12:48","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283162,"tripposition":3,"stopstatus":1,"stopstatus_distance":1.04,"lastetaupdated":"2024-02-21T12:48:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Shivakote Cross","stationid":28339,"actual_arrivaltime":null,"etastatus":"12:52","etastatusmapview":"12:52","latitude":13.13555,"longitude":77.51331,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:48","sch_departuretime":"12:48","eta":"12:52","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283163,"tripposition":3,"stopstatus":1,"stopstatus_distance":2.05,"lastetaupdated":"2024-02-21T12:52:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Shivakote","stationid":34552,"actual_arrivaltime":null,"etastatus":"12:53","etastatusmapview":"12:53","latitude":13.13403,"longitude":77.51476,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:49","sch_departuretime":"12:49","eta":"12:53","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283164,"tripposition":3,"stopstatus":1,"stopstatus_distance":2.23,"lastetaupdated":"2024-02-21T12:53:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Kurubarahalli Cross","stationid":33638,"actual_arrivaltime":null,"etastatus":"12:55","etastatusmapview":"12:55","latitude":13.12676,"longitude":77.51959,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:51","sch_departuretime":"12:51","eta":"12:55","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283165,"tripposition":3,"stopstatus":1,"stopstatus_distance":2.98,"lastetaupdated":"2024-02-21T12:55:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Chikka Byalakere","stationid":24491,"actual_arrivaltime":null,"etastatus":"12:57","etastatusmapview":"12:57","latitude":13.11965,"longitude":77.52161,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:52","sch_departuretime":"12:52","eta":"12:57","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283166,"tripposition":3,"stopstatus":1,"stopstatus_distance":3.56,"lastetaupdated":"2024-02-21T12:57:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Dodda Byalakere","stationid":32499,"actual_arrivaltime":null,"etastatus":"12:59","etastatusmapview":"12:59","latitude":13.11275,"longitude":77.52495,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:54","sch_departuretime":"12:54","eta":"12:59","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283167,"tripposition":3,"stopstatus":1,"stopstatus_distance":4.31,"lastetaupdated":"2024-02-21T12:59:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Shamarajapura Cross","stationid":38710,"actual_arrivaltime":null,"etastatus":"13:06","etastatusmapview":"13:06","latitude":13.10625,"longitude":77.54676,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:58","sch_departuretime":"12:58","eta":"13:06","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283168,"tripposition":3,"stopstatus":1,"stopstatus_distance":6.65,"lastetaupdated":"2024-02-21T13:06:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Veerasagara","stationid":31572,"actual_arrivaltime":null,"etastatus":"13:08","etastatusmapview":"13:08","latitude":13.10485,"longitude":77.55407,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"12:59","sch_departuretime":"12:59","eta":"13:08","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283169,"tripposition":3,"stopstatus":1,"stopstatus_distance":7.41,"lastetaupdated":"2024-02-21T13:08:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Dodda Bettahalli","stationid":25010,"actual_arrivaltime":null,"etastatus":"13:11","etastatusmapview":"13:11","latitude":13.09430,"longitude":77.55426,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:02","sch_departuretime":"13:02","eta":"13:11","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283170,"tripposition":3,"stopstatus":1,"stopstatus_distance":8.07,"lastetaupdated":"2024-02-21T13:11:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Chikka Bettahalli","stationid":21832,"actual_arrivaltime":null,"etastatus":"13:13","etastatusmapview":"13:13","latitude":13.08945,"longitude":77.55629,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:04","sch_departuretime":"13:04","eta":"13:13","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283171,"tripposition":3,"stopstatus":1,"stopstatus_distance":8.58,"lastetaupdated":"2024-02-21T13:13:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Jalli Machine","stationid":22096,"actual_arrivaltime":null,"etastatus":"13:14","etastatusmapview":"13:14","latitude":13.08595,"longitude":77.55535,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:05","sch_departuretime":"13:05","eta":"13:14","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283172,"tripposition":3,"stopstatus":1,"stopstatus_distance":8.75,"lastetaupdated":"2024-02-21T13:14:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Depot-45 Gate","stationid":36327,"actual_arrivaltime":null,"etastatus":"13:16","etastatusmapview":"13:16","latitude":13.08290,"longitude":77.55072,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:06","sch_departuretime":"13:06","eta":"13:16","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283173,"tripposition":3,"stopstatus":1,"stopstatus_distance":8.61,"lastetaupdated":"2024-02-21T13:16:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"MS Palya","stationid":33957,"actual_arrivaltime":null,"etastatus":"13:17","etastatusmapview":"13:17","latitude":13.08145,"longitude":77.54831,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:07","sch_departuretime":"13:07","eta":"13:17","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283174,"tripposition":3,"stopstatus":1,"stopstatus_distance":8.55,"lastetaupdated":"2024-02-21T13:17:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Jalahalli East 7th Camp","stationid":26259,"actual_arrivaltime":null,"etastatus":"13:20","etastatusmapview":"13:20","latitude":13.07354,"longitude":77.54650,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:09","sch_departuretime":"13:09","eta":"13:20","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283175,"tripposition":3,"stopstatus":1,"stopstatus_distance":9.09,"lastetaupdated":"2024-02-21T13:20:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"SBI Bank","stationid":22467,"actual_arrivaltime":null,"etastatus":"13:21","etastatusmapview":"13:21","latitude":13.07239,"longitude":77.54625,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:10","sch_departuretime":"13:10","eta":"13:21","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283176,"tripposition":3,"stopstatus":1,"stopstatus_distance":9.17,"lastetaupdated":"2024-02-21T13:21:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Jalahalli East","stationid":22092,"actual_arrivaltime":null,"etastatus":"13:22","etastatusmapview":"13:22","latitude":13.06759,"longitude":77.54464,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:11","sch_departuretime":"13:11","eta":"13:22","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283177,"tripposition":3,"stopstatus":1,"stopstatus_distance":9.50,"lastetaupdated":"2024-02-21T13:22:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Kendriya Vidyalaya","stationid":22163,"actual_arrivaltime":null,"etastatus":"13:23","etastatusmapview":"13:23","latitude":13.06556,"longitude":77.54428,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:12","sch_departuretime":"13:12","eta":"13:23","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283178,"tripposition":3,"stopstatus":1,"stopstatus_distance":9.66,"lastetaupdated":"2024-02-21T13:23:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Gangamma Circle","stationid":25311,"actual_arrivaltime":null,"etastatus":"13:26","etastatusmapview":"13:26","latitude":13.05776,"longitude":77.54635,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:14","sch_departuretime":"13:14","eta":"13:26","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283179,"tripposition":3,"stopstatus":1,"stopstatus_distance":10.51,"lastetaupdated":"2024-02-21T13:26:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"HMT Club House","stationid":35215,"actual_arrivaltime":null,"etastatus":"13:28","etastatusmapview":"13:28","latitude":13.05350,"longitude":77.55068,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:16","sch_departuretime":"13:16","eta":"13:28","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283180,"tripposition":3,"stopstatus":1,"stopstatus_distance":11.16,"lastetaupdated":"2024-02-21T13:28:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"BEL Market 1","stationid":35683,"actual_arrivaltime":null,"etastatus":"13:29","etastatusmapview":"13:29","latitude":13.05192,"longitude":77.55193,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:17","sch_departuretime":"13:17","eta":"13:29","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283181,"tripposition":3,"stopstatus":1,"stopstatus_distance":11.38,"lastetaupdated":"2024-02-21T13:29:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"BEL Circle","stationid":20637,"actual_arrivaltime":null,"etastatus":"13:31","etastatusmapview":"13:31","latitude":13.04520,"longitude":77.55669,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:19","sch_departuretime":"13:19","eta":"13:31","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283182,"tripposition":3,"stopstatus":1,"stopstatus_distance":12.29,"lastetaupdated":"2024-02-21T13:31:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Kuvempu Circle","stationid":28426,"actual_arrivaltime":null,"etastatus":"13:33","etastatusmapview":"13:33","latitude":13.04337,"longitude":77.56138,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:21","sch_departuretime":"13:21","eta":"13:33","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283183,"tripposition":3,"stopstatus":1,"stopstatus_distance":12.74,"lastetaupdated":"2024-02-21T13:33:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Devasandra Chikkamaranahalli","stationid":32470,"actual_arrivaltime":null,"etastatus":"13:36","etastatusmapview":"13:36","latitude":13.03638,"longitude":77.56656,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:23","sch_departuretime":"13:23","eta":"13:36","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283184,"tripposition":3,"stopstatus":1,"stopstatus_distance":13.70,"lastetaupdated":"2024-02-21T13:36:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"ITI Layout","stationid":33056,"actual_arrivaltime":null,"etastatus":"13:37","etastatusmapview":"13:37","latitude":13.03394,"longitude":77.56869,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:24","sch_departuretime":"13:24","eta":"13:37","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283185,"tripposition":3,"stopstatus":1,"stopstatus_distance":14.06,"lastetaupdated":"2024-02-21T13:37:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"MS Ramaiah Hospital","stationid":21029,"actual_arrivaltime":null,"etastatus":"13:39","etastatusmapview":"13:39","latitude":13.02771,"longitude":77.57162,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:26","sch_departuretime":"13:26","eta":"13:39","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283186,"tripposition":3,"stopstatus":1,"stopstatus_distance":14.81,"lastetaupdated":"2024-02-21T13:39:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"CPRI Quarters","stationid":20730,"actual_arrivaltime":null,"etastatus":"13:41","etastatusmapview":"13:41","latitude":13.02217,"longitude":77.57224,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:27","sch_departuretime":"13:27","eta":"13:41","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283187,"tripposition":3,"stopstatus":1,"stopstatus_distance":15.36,"lastetaupdated":"2024-02-21T13:41:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Sadashivanagara Police Station","stationid":21099,"actual_arrivaltime":null,"etastatus":"13:43","etastatusmapview":"13:43","latitude":13.01587,"longitude":77.57277,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:28","sch_departuretime":"13:28","eta":"13:43","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283188,"tripposition":3,"stopstatus":1,"stopstatus_distance":15.98,"lastetaupdated":"2024-02-21T13:43:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"CPRI","stationid":24726,"actual_arrivaltime":null,"etastatus":"13:44","etastatusmapview":"13:44","latitude":13.01484,"longitude":77.57489,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:29","sch_departuretime":"13:29","eta":"13:44","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283189,"tripposition":3,"stopstatus":1,"stopstatus_distance":16.20,"lastetaupdated":"2024-02-21T13:44:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Mekhri Circle","stationid":33920,"actual_arrivaltime":null,"etastatus":"13:48","etastatusmapview":"13:48","latitude":13.01458,"longitude":77.58502,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:31","sch_departuretime":"13:31","eta":"13:48","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283190,"tripposition":3,"stopstatus":1,"stopstatus_distance":16.84,"lastetaupdated":"2024-02-21T13:48:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"TV Tower","stationid":23790,"actual_arrivaltime":null,"etastatus":"13:50","etastatusmapview":"13:50","latitude":13.00978,"longitude":77.59078,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:32","sch_departuretime":"13:32","eta":"13:50","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283191,"tripposition":3,"stopstatus":1,"stopstatus_distance":17.63,"lastetaupdated":"2024-02-21T13:50:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Munireddy Palya J C Nagara","stationid":23791,"actual_arrivaltime":null,"etastatus":"13:51","etastatusmapview":"13:51","latitude":13.00676,"longitude":77.59276,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:33","sch_departuretime":"13:33","eta":"13:51","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283192,"tripposition":3,"stopstatus":1,"stopstatus_distance":18.03,"lastetaupdated":"2024-02-21T13:51:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Jayamahal","stationid":23792,"actual_arrivaltime":null,"etastatus":"13:53","etastatusmapview":"13:53","latitude":13.00189,"longitude":77.59448,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:34","sch_departuretime":"13:34","eta":"13:53","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283193,"tripposition":3,"stopstatus":1,"stopstatus_distance":18.58,"lastetaupdated":"2024-02-21T13:53:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Cantonment Railway Station","stationid":21805,"actual_arrivaltime":null,"etastatus":"13:56","etastatusmapview":"13:56","latitude":12.99384,"longitude":77.59712,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:36","sch_departuretime":"13:36","eta":"13:56","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283194,"tripposition":3,"stopstatus":1,"stopstatus_distance":19.48,"lastetaupdated":"2024-02-21T13:56:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"CSI Hospital","stationid":21868,"actual_arrivaltime":null,"etastatus":"13:58","etastatusmapview":"13:58","latitude":12.98983,"longitude":77.59938,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:37","sch_departuretime":"13:37","eta":"13:58","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283195,"tripposition":3,"stopstatus":1,"stopstatus_distance":19.98,"lastetaupdated":"2024-02-21T13:58:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Indian Express","stationid":20855,"actual_arrivaltime":null,"etastatus":"14:01","etastatusmapview":"14:01","latitude":12.98408,"longitude":77.59827,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:39","sch_departuretime":"13:39","eta":"14:01","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283196,"tripposition":3,"stopstatus":1,"stopstatus_distance":20.44,"lastetaupdated":"2024-02-21T14:01:00","minstopstatus_distance":1.04},{"rowid":1,"tripid":29551944,"routeno":"267","routename":"HSG-SBS","busno":"KA57F3554","tripstatus":"Running","tripstatusid":"1","sourcestation":"Hesaraghatta","destinationstation":"Shivajinagara Bus Station","servicetype":"Non AC/Ordinary","webservicetype":"Non-AC","servicetypeid":72,"lastupdatedat":"21-02-2024 12:45:30","stationname":"Shivajinagara Bus Station","stationid":21173,"actual_arrivaltime":null,"etastatus":"14:03","etastatusmapview":"14:03","latitude":12.98328,"longitude":77.60304,"currentstop":"Ivarukandapura (Towards Shivakote)","laststop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","weblaststop":"Indian Institute of Horticultural Research","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","currlatitude":13.137649,"currlongitude":77.494476,"sch_arrivaltime":"13:43","sch_departuretime":"13:43","eta":"14:03","actual_arrivaltime1":null,"actual_departudetime":null,"tripstarttime":"12:40","tripendtime":"14:20","routeid":13200,"vehicleid":22818,"responsecode":200,"lastreceiveddatetimeflag":1,"srno":637283197,"tripposition":1,"stopstatus":1,"stopstatus_distance":20.81,"lastetaupdated":"2024-02-21T14:03:00","minstopstatus_distance":1.04}],"LiveLocation":[{"latitude":13.137649,"longitude":77.494476,"location":"Ivarukandapura (Towards Shivakote)","lastrefreshon":"21-02-2024 12:45:30","nextstop":"Muthkur Cross Shivakote (Towards Shivakote)","previousstop":"Indian Institute of Horticultural Research (Towards Ivarukandapura)","vehicleid":22818,"vehiclenumber":"KA57F3554","routeno":"267","servicetypeid":72,"servicetype":"Non AC/Ordinary","heading":6.00,"responsecode":200,"trip_status":1,"lastreceiveddatetimeflag":1}],"Message":"Success","Issuccess":true,"exception":null,"RowCount":41,"responsecode":200}'
      const testData = ''
      if (testData) {
        return new Promise((resolve) => resolve(JSON.parse(testData)))
      }
      try {
        const res = await fetch("https://bmtcmobileapistaging.amnex.com/WebAPI/VehicleTripDetails_v2", {
          method: "POST",
          body: JSON.stringify({
            vehicleId: vehicleid,
          }),
          headers: {
            "Content-type": "application/json; charset=UTF-8",
            "lan": "en",
            "deviceType": "android",
            "deviceId": "0398cd37e29548dc",
            "authToken": "N/A"
          }
        });
        obj = await res.json()
        return obj
      } catch (error) {
        console.log("There was an error", error)
        return {}
      }

    }
  </script>
</body>

</html>